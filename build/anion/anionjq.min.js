'use strict';$('.description-text--more').hide(),$('.main__input-cell--H2O').hide(),$('.main__output-cell--H2O').hide(),600>$(window).width()&&$('.main__output-area').hide();var NA2O_MOL=61.979,K2O_MOL=94.196,AL2O3_MOL=101.961,MGO_MOL=40.304,FEO_MOL=71.846,FE2O3_MOL=159.692,CAO_MOL=56.077,MNO_MOL=70.938,TIO2_MOL=79.879,SIO2_MOL=60.084,H2O_MOL=18.015;const KEYCODES={ENTER:13,SPACE:32};var Na2O=0,K2O=0,Al2O3=0,MgO=0,FeO=0,Fe2O3=0,CaO=0,MnO=0,TiO2=0,SiO2=0,H2O=0;$('#Na2O-input').on('input',function(){Na2O=this.value}),$('#K2O-input').on('input',function(){K2O=this.value}),$('#Al2O3-input').on('input',function(){Al2O3=this.value}),$('#MgO-input').on('input',function(){MgO=this.value}),$('#FeO-input').on('input',function(){FeO=this.value}),$('#Fe2O3-input').on('input',function(){Fe2O3=this.value}),$('#CaO-input').on('input',function(){CaO=this.value}),$('#MnO-input').on('input',function(){MnO=this.value}),$('#TiO2-input').on('input',function(){TiO2=this.value}),$('#SiO2-input').on('input',function(){SiO2=this.value}),$('#H2O-input').on('input',function(){H2O=this.value});var calculate=function(){var a=function(X,Y){return X/Y},b=a(Na2O,NA2O_MOL),c=a(K2O,K2O_MOL),d=a(Al2O3,AL2O3_MOL),f=a(MgO,MGO_MOL),g=a(FeO,FEO_MOL),h=a(Fe2O3,FE2O3_MOL),i=a(CaO,CAO_MOL),j=a(MnO,MNO_MOL),k=a(TiO2,TIO2_MOL),l=a(SiO2,SIO2_MOL),m=a(H2O,H2O_MOL),J=function(X){return(b+c+3*d+f+g+3*h+i+j+2*k+2*l+m)/X},K=function(X){return X/J(mineralSelectValue)},L=K(2*b),M=K(2*c),N=K(2*d),O=K(f),P=K(g),Q=K(2*h),R=K(i),S=K(j),T=K(k),U=K(l),V=K(2*m),W=function(X){return 0===X?X:1e-4>X.toFixed(2)?0:isNaN(X)?0:X.toFixed(2)};$('#Na2O-output').text(W(L)),$('#K2O-output').text(W(M)),$('#Al2O3-output').text(W(N)),$('#MgO-output').text(W(O)),$('#FeO-output').text(W(P)),$('#Fe2O3-output').text(W(Q)),$('#CaO-output').text(W(R)),$('#MnO-output').text(W(S)),$('#TiO2-output').text(W(T)),$('#SiO2-output').text(W(U)),$('#H2O-output').text(W(V)),600>$(window).width()&&$('.main__output-area').slideDown('fast',function(){$('html, body').animate({scrollTop:$(document).height()},'fast')})},mineralSelectValue=$('#mineral-select')[0].value;$('#mineral-select').on('change',function(){mineralSelectValue=$('#mineral-select')[0].value,'hydrous'==$('#mineral-select option:selected')[0].className?($('.main__input-cell--H2O').slideDown('fast'),$('.main__output-cell--H2O').slideDown('fast')):'anhydrous'==$('#mineral-select option:selected')[0].className&&($('.main__input-cell--H2O').slideUp('fast'),$('.main__output-cell--H2O').slideUp('fast'))});var clear=function(){Na2O=0,K2O=0,Al2O3=0,MgO=0,FeO=0,Fe2O3=0,CaO=0,MnO=0,TiO2=0,SiO2=0,H2O=0,$('.main__input').val(''),$('.main__output').text(''),inputsArr.length=0,$('.button--calculate-anion').prop('disabled',!0),600>$(window).width()&&$('.main__output-area').slideUp('fast')};$(document).keydown(function(a){13==a.which&&2<=inputsArr.length&&$('.button--calculate-anion').addClass('button--calculate-anion-active')}),$(document).keyup(function(a){13==a.which&&2<=inputsArr.length&&($('.button--calculate-anion').removeClass('button--calculate-anion-active'),calculate())}),$('.button--calculate-anion').on('click',function(){calculate()}),$('.button--clear').on('click',function(){clear()});var descriptionToggle=function(){$('.description-text--more').fadeToggle('fast',function(){$('.description-text--more').is(':hidden')?$('.description-toggle').text('Show more.'):$('.description-text--more').not(':hidden')&&$('.description-toggle').text('Show less.')})};$('.description-toggle').on('click',descriptionToggle),$('.description-toggle').on('keyup',function(a){(a.keyCode===KEYCODES.SPACE||a.keyCode===KEYCODES.ENTER)&&descriptionToggle()}),$('.button--calculate-anion').prop('disabled',!0);var inputsArr=[];$('.main').on('input',function(a){a.preventDefault(),inputsArr=Array.prototype.filter.call($('.main__input'),b=>{return''!==b.value}),2>inputsArr.length?$('.button--calculate-anion').prop('disabled',!0):2<=inputsArr.length&&$('.button--calculate-anion').prop('disabled',!1)});
