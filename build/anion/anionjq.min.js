'use strict';$('.description-text--more').hide(),$('.main__input-cell--H2O').hide(),$('.main__output-cell--H2O').hide(),$('.main__input-cell--F').hide(),$('.main__output-cell--F').hide(),$('.main__input-cell--Cl').hide(),$('.main__output-cell--Cl').hide(),600>$(window).width()&&$('.main__output-area').hide();var NA2O_MOL=61.979,K2O_MOL=94.196,AL2O3_MOL=101.961,MGO_MOL=40.304,FEO_MOL=71.846,FE2O3_MOL=159.692,CAO_MOL=56.077,MNO_MOL=70.938,TIO2_MOL=79.879,SIO2_MOL=60.084,H2O_MOL=18.015,F_MOL=18.994,CL_MOL=35.453,KEYCODES={ENTER:13,SPACE:32},Na2O=0,K2O=0,Al2O3=0,MgO=0,FeO=0,Fe2O3=0,CaO=0,MnO=0,TiO2=0,SiO2=0,H2O=0,F=0,Cl=0;$('#Na2O-input').on('input',function(){Na2O=this.value}),$('#K2O-input').on('input',function(){K2O=this.value}),$('#Al2O3-input').on('input',function(){Al2O3=this.value}),$('#MgO-input').on('input',function(){MgO=this.value}),$('#FeO-input').on('input',function(){FeO=this.value}),$('#Fe2O3-input').on('input',function(){Fe2O3=this.value}),$('#CaO-input').on('input',function(){CaO=this.value}),$('#MnO-input').on('input',function(){MnO=this.value}),$('#TiO2-input').on('input',function(){TiO2=this.value}),$('#SiO2-input').on('input',function(){SiO2=this.value}),$('#H2O-input').on('input',function(){H2O=this.value}),$('#F-input').on('input',function(){F=this.value}),$('#Cl-input').on('input',function(){Cl=this.value});var calculate=function(){var a=function(fa,ga){return fa/ga},b=a(Na2O,NA2O_MOL),c=a(K2O,K2O_MOL),d=a(Al2O3,AL2O3_MOL),f=a(MgO,MGO_MOL),g=a(FeO,FEO_MOL),h=a(Fe2O3,FE2O3_MOL),i=a(CaO,CAO_MOL),j=a(MnO,MNO_MOL),k=a(TiO2,TIO2_MOL),l=a(SiO2,SIO2_MOL),m=a(H2O,H2O_MOL),n=a(F,F_MOL),o=a(Cl,CL_MOL),A=n,B=o,Q=function(fa){return(b+c+3*d+f+g+3*h+i+j+2*k+2*l+m+A+B-(A+B)/2)/fa},R=function(fa){return fa/Q(mineralSelectValue)},S=R(2*b),T=R(2*c),U=R(2*d),V=R(f),W=R(g),X=R(2*h),Y=R(i),Z=R(j),_=R(k),aa=R(l),ba=R(2*m),ca=R(n),da=R(o),ea=function(fa){return 0===fa?fa:1e-4>fa.toFixed(2)?0:isNaN(fa)?0:fa.toFixed(2)};$('#Na2O-output').text(ea(S)),$('#K2O-output').text(ea(T)),$('#Al2O3-output').text(ea(U)),$('#MgO-output').text(ea(V)),$('#FeO-output').text(ea(W)),$('#Fe2O3-output').text(ea(X)),$('#CaO-output').text(ea(Y)),$('#MnO-output').text(ea(Z)),$('#TiO2-output').text(ea(_)),$('#SiO2-output').text(ea(aa)),$('#H2O-output').text(ea(ba)),$('#F-output').text(ea(ca)),$('#Cl-output').text(ea(da)),600>$(window).width()&&$('.main__output-area').slideDown('fast',function(){$('html, body').animate({scrollTop:$(document).height()},'fast')})},mineralSelectValue=$('#mineral-select')[0].value;$('#mineral-select').on('change',function(){mineralSelectValue=$('#mineral-select')[0].value,'hydrous'==$('#mineral-select option:selected')[0].className?($('.main__input-cell--H2O').slideDown('fast'),$('.main__output-cell--H2O').slideDown('fast'),$('.main__input-cell--F').slideUp('fast'),$('.main__output-cell--F').slideUp('fast'),$('.main__input-cell--Cl').slideUp('fast'),$('.main__output-cell--Cl').slideUp('fast')):'anhydrous'==$('#mineral-select option:selected')[0].className?($('.main__input-cell--H2O').slideUp('fast'),$('.main__output-cell--H2O').slideUp('fast'),$('.main__input-cell--F').slideUp('fast'),$('.main__output-cell--F').slideUp('fast'),$('.main__input-cell--Cl').slideUp('fast'),$('.main__output-cell--Cl').slideUp('fast')):'micas'==$('#mineral-select option:selected')[0].className?($('.main__input-cell--H2O').slideDown('fast'),$('.main__output-cell--H2O').slideDown('fast'),$('.main__input-cell--F').slideDown('fast'),$('.main__output-cell--F').slideDown('fast'),$('.main__input-cell--Cl').slideUp('fast'),$('.main__output-cell--Cl').slideUp('fast')):'hydrousAmphiboles'==$('#mineral-select option:selected')[0].className&&($('.main__input-cell--H2O').slideDown('fast'),$('.main__output-cell--H2O').slideDown('fast'),$('.main__input-cell--F').slideDown('fast'),$('.main__output-cell--F').slideDown('fast'),$('.main__input-cell--Cl').slideDown('fast'),$('.main__output-cell--Cl').slideDown('fast'))});var clear=function(){Na2O=0,K2O=0,Al2O3=0,MgO=0,FeO=0,Fe2O3=0,CaO=0,MnO=0,TiO2=0,SiO2=0,H2O=0,F=0,Cl=0,$('.main__input').val(''),$('.main__output').text(''),inputsArr.length=0,$('.button--calculate-anion').prop('disabled',!0),600>$(window).width()&&$('.main__output-area').slideUp('fast')};$(document).keydown(function(a){13==a.which&&2<=inputsArr.length&&$('.button--calculate-anion').addClass('button--calculate-anion-active')}),$(document).keyup(function(a){13==a.which&&2<=inputsArr.length&&($('.button--calculate-anion').removeClass('button--calculate-anion-active'),calculate())}),$('.button--calculate-anion').on('click',function(){calculate()}),$('.button--clear').on('click',function(){clear()});var descriptionToggle=function(){$('.description-text--more').fadeToggle('fast',function(){$('.description-text--more').is(':hidden')?$('.description-toggle').text('Show more.'):$('.description-text--more').not(':hidden')&&$('.description-toggle').text('Show less.')})};$('.description-toggle').on('click',descriptionToggle),$('.description-toggle').on('keyup',function(a){(a.keyCode===KEYCODES.SPACE||a.keyCode===KEYCODES.ENTER)&&descriptionToggle()}),$('.button--calculate-anion').prop('disabled',!0);var inputsArr=[];$('.main').on('input',function(a){a.preventDefault(),inputsArr=Array.prototype.filter.call($('.main__input'),b=>{return''!==b.value}),2>inputsArr.length?$('.button--calculate-anion').prop('disabled',!0):2<=inputsArr.length&&$('.button--calculate-anion').prop('disabled',!1)});
