'use strict';$('.description-text--more').hide(),$('.main__input-cell--Fe2O3').hide(),$('.main__output-cell--Fe2O3').hide(),600>$(window).width()&&$('.main__output-area').hide();var NA2O_MOL=61.979,K2O_MOL=94.196,AL2O3_MOL=101.961,MGO_MOL=40.304,FEO_MOL=71.846,CAO_MOL=56.077,MNO_MOL=70.938,TIO2_MOL=79.879,SIO2_MOL=60.084,FE2O3_MOL=159.692;const KEYCODES={ENTER:13,SPACE:32};var thirteen=13,fifteen=15,twentyThree=23,fourtySix=46,Na2O=0,K2O=0,Al2O3=0,MgO=0,FeO=0,CaO=0,MnO=0,TiO2=0,SiO2=0;$('#Na2O-input').on('input',function(){Na2O=this.value}),$('#K2O-input').on('input',function(){K2O=this.value}),$('#Al2O3-input').on('input',function(){Al2O3=this.value}),$('#MgO-input').on('input',function(){MgO=this.value}),$('#FeO-input').on('input',function(){FeO=this.value}),$('#Fe2O3-input').on('input',function(){Fe2O3=this.value}),$('#CaO-input').on('input',function(){CaO=this.value}),$('#MnO-input').on('input',function(){MnO=this.value}),$('#TiO2-input').on('input',function(){TiO2=this.value}),$('#SiO2-input').on('input',function(){SiO2=this.value});var calculate=function(){var a=function(sa,ta){return sa/ta},b=1.1113*FeO,c=a(Na2O,NA2O_MOL),d=a(K2O,K2O_MOL),f=a(Al2O3,AL2O3_MOL),g=a(MgO,MGO_MOL),h=a(FeO,FEO_MOL),i=a(CaO,CAO_MOL),j=a(MnO,MNO_MOL),k=a(TiO2,TIO2_MOL),l=a(SiO2,SIO2_MOL),m=b/FE2O3_MOL,n=2*c,o=2*d,p=2*f,q=g,r=h,s=i,t=j,u=k,v=l,x=c,y=d,z=3*f,A=g,C=i,D=j,E=2*k,F=2*l,H=function(){return(x+y+z+A+h+C+D+E+F)/mineralSelectValueX},I=function(){return(x+y+z+A+3*m+C+D+E+F)/mineralSelectValueX},J=function(){return(c+d+f+g+h+i+j+k+l)/fifteen},K=function(sa){return sa/H()},M=function(){return 23==mineralSelectValueX?K(q)+K(r)+K(v)+K(p)+K(u):6==mineralSelectValueX||12==mineralSelectValueX?K(n)+K(o)+K(p)+K(q)+K(r)+K(s)+K(t)+K(v)+K(u):(console.log('wrong select value!'),!1)},N=function(){return mineralSelectValueT/M()},O=function(){return 2*mineralSelectValueX*(1-N())},P=K(n),Q=K(o),R=K(p),S=K(q),T=K(r),U=K(s),V=K(t),W=K(u),X=K(v),Y=K(m),Z=P*N(),_=Q*N(),aa=R*N(),ba=S*N(),ca=T*N(),da=U*N(),ea=V*N(),fa=W*N(),ga=X*N(),ha=ca-O(),ia=c/J(),ja=d/J(),ka=f/J(),la=g/J(),ma=h/J(),na=i/J(),oa=j/J(),pa=k/J(),qa=l/J(),ra=function(sa){return 0===sa?sa:sa.toFixed(2)};M()<=mineralSelectValueT?($('.main__input-cell--Fe2O3').slideUp('fast'),$('.main__output-cell--Fe2O3').slideUp('fast'),console.log('\u0442\u0443\u0442 \u0430\u043F\u0444\u0443! \u0438 \u0432\u0441\u0435 \u043E\u0445\u0443\u0435\u043D\u043D\u043E \u043F\u0430\u0448\u0435\u0442 !!'),$('#Na2O-output').text(ra(P)),$('#K2O-output').text(ra(Q)),$('#Al2O3-output').text(ra(R)),$('#MgO-output').text(ra(S)),$('#FeO-output').text(ra(T)),$('#CaO-output').text(ra(U)),$('#MnO-output').text(ra(V)),$('#TiO2-output').text(ra(W)),$('#SiO2-output').text(ra(X))):M()>mineralSelectValueT&&0<O()?600<=$(window).width()?($('.main__input-cell--Fe2O3').slideDown('fast'),$('.main__output-cell--Fe2O3').slideDown('fast'),console.log('\u0442\u0443\u0442 \u043A\u043E\u0440\u0440! \u0438 \u0432\u0441\u0435 \u043E\u0445\u0443\u0435\u043D\u043D\u043E \u043F\u0430\u0448\u0435\u0442 !!'),$('#Na2O-output').text(ra(Z)),$('#K2O-output').text(ra(_)),$('#Al2O3-output').text(ra(aa)),$('#MgO-output').text(ra(ba)),$('#FeO-output').text(ra(ha)),$('#Fe2O3-output').text(ra(O())),$('#CaO-output').text(ra(da)),$('#MnO-output').text(ra(ea)),$('#TiO2-output').text(ra(fa)),$('#SiO2-output').text(ra(ga))):($('.main__output-cell--Fe2O3').slideDown('fast'),console.log('\u0442\u0443\u0442 \u043A\u043E\u0440\u0440! \u0438 \u0432\u0441\u0435 \u043E\u0445\u0443\u0435\u043D\u043D\u043E \u043F\u0430\u0448\u0435\u0442 !!'),$('#Na2O-output').text(ra(Z)),$('#K2O-output').text(ra(_)),$('#Al2O3-output').text(ra(aa)),$('#MgO-output').text(ra(ba)),$('#FeO-output').text(ra(ha)),$('#Fe2O3-output').text(ra(O())),$('#CaO-output').text(ra(da)),$('#MnO-output').text(ra(ea)),$('#TiO2-output').text(ra(fa)),$('#SiO2-output').text(ra(ga))):M()>mineralSelectValueT&&0>O()&&(600<=$(window).width()?($('.main__input-cell--Fe2O3').slideDown('fast'),$('.main__output-cell--Fe2O3').slideDown('fast'),console.log('\u0442\u0443\u0442 \u0444\u0435\u0440\u0443\u043C'),$('#Na2O-output').text(ra(Z)),$('#K2O-output').text(ra(_)),$('#Al2O3-output').text(ra(R)),$('#MgO-output').text(ra(ba)),$('#FeO-output').text(ra(Y)),$('#Fe2O3-output').text(ra(ha)),$('#CaO-output').text(ra(da)),$('#MnO-output').text(ra(ea)),$('#TiO2-output').text(ra(fa)),$('#SiO2-output').text(ra(ga))):($('.main__output-cell--Fe2O3').slideDown('fast'),console.log('\u0442\u0443\u0442 \u0444\u0435\u0440\u0443\u043C'),$('#Na2O-output').text(ra(Z)),$('#K2O-output').text(ra(_)),$('#Al2O3-output').text(ra(R)),$('#MgO-output').text(ra(ba)),$('#FeO-output').text(ra(Y)),$('#Fe2O3-output').text(ra(ha)),$('#CaO-output').text(ra(da)),$('#MnO-output').text(ra(ea)),$('#TiO2-output').text(ra(fa)),$('#SiO2-output').text(ra(ga)))),600>$(window).width()&&$('.main__output-area').slideDown('fast',function(){$('html, body').animate({scrollTop:$(document).height()},'fast')})},mineralSelectValueX=+$('#mineral-select')[0].value,mineralSelectValueT=13;$('#mineral-select').on('change',function(){mineralSelectValueX=+$('#mineral-select')[0].value,23==mineralSelectValueX?mineralSelectValueT=13:6==mineralSelectValueX?mineralSelectValueT=4:12==mineralSelectValueX&&(mineralSelectValueT=8)});var clear=function(){Na2O=0,K2O=0,Al2O3=0,MgO=0,FeO=0,CaO=0,MnO=0,TiO2=0,SiO2=0,$('.main__input').val(''),$('.main__output').text(''),inputsArr.length=0,$('.main__input-cell--Fe2O3').slideUp('fast'),$('.main__output-cell--Fe2O3').slideUp('fast'),$('.button--calculate-ferrum').prop('disabled',!0),600>$(window).width()&&$('.main__output-area').slideUp('fast')};$(document).keydown(function(a){13==a.which&&2<=inputsArr.length&&$('.button--calculate-ferrum').addClass('button--calculate-ferrum-active')}),$(document).keyup(function(a){13==a.which&&2<=inputsArr.length&&($('.button--calculate-ferrum').removeClass('button--calculate-ferrum-active'),calculate())}),$('.button--calculate-ferrum').on('click',function(){calculate()}),$('.button--clear').on('click',function(){clear()}),$('.button--calculate-ferrum').prop('disabled',!0);var inputsArr=[];$('.main').on('input',function(a){a.preventDefault(),inputsArr=Array.prototype.filter.call($('.main__input'),b=>{return''!==b.value}),2>inputsArr.length?$('.button--calculate-ferrum').prop('disabled',!0):2<=inputsArr.length&&$('.button--calculate-ferrum').prop('disabled',!1)});
